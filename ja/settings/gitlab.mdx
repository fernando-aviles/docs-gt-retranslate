---
title: GitLab
description: GitLabレポジトリとドキュメントを同期
icon: gitlab
---

GitLabとMintlifyの間の変更を認証および同期するために、アクセストークンとWebhookの組み合わせを使用します。

* GitLabから情報を取得するためにアクセストークンを使用します。
* 変更が行われたときにGitLabがMintlifyに通知できるようにWebhookを使用します。
  * これによりMintlifyはMRが作成されたときにプレビューデプロイメントを作成できます。

## 接続の設定

<Steps>
  <Step title="Find your project ID">
    GitLabプロジェクト内で、`Settings` > `General`に移動して`Project ID`を見つけます。

    <Frame>
      <img src="/images/gitlab/gitlab-project-id.png" />
    </Frame>
  </Step>

  <Step title="Generate an access token">
    a. `Settings` > `Access Tokens`に移動します。

    b. `Add new token`を選択します。

    1. トークンに「Mintlify」と名付けます。
    2. プライベートリポジトリがある場合、ロールを`Maintainer`に設定する必要があります。
    3. スコープとして`api`と`read_api`を選択します。

    c. 最後に`Create project access token`をクリックしてトークンをコピーします。

    <Frame>
      <img src="/images/gitlab/gitlab-project-access-token.png" />
    </Frame>
  </Step>

  <Step title="Set up the connection">
    Mintlifyダッシュボード内で、前のステップで取得したプロジェクトIDとアクセストークンを他の設定と共に追加します。完了したら「Save Changes」をクリックします。[Mintlify dashboard](https://dashboard.mintlify.com/settings/deployment/git-settings)、前のステップで取得したプロジェクトIDとアクセストークンを他の設定と共に追加してください。完了したら「Save Changes」をクリックしてください。

    <Frame>
      <img src="/images/gitlab/gitlab-config.png" />
    </Frame>
  </Step>
</Steps>

## Webhookの作成

Webhookを使用することで、変更が行われたときにイベントを受信し、自動的にデプロイメントをトリガーすることができます。

<Steps>
  <Step title="Navigate to Settings > Webhooks and click 'Add new Webhook'">
    <Frame>
      <img src="/images/gitlab/gitlab-webhook.png" />
    </Frame>
  </Step>

  <Step title="Set up URL and webhook">
    「URL」フィールドにエンドポイント`https://leaves.mintlify.com/gitlab-webhook`を入力し、Webhookに「Mintlify」と名付けます。
  </Step>

  <Step title="Paste token">
    接続設定後に生成されたWebhookトークンを貼り付けます。

    <Frame>
      <img src="/images/gitlab/gitlab-show-webtoken.png" />
    </Frame>
  </Step>

  <Step title="Select events">
    Webhookをトリガーするイベントを選択します：

    * プッシュイベント（全ブランチ）
    * マージリクエストイベント

    完了すると次のようになります：

    <Frame>
      <img src="/images/gitlab/gitlab-project-webtoken.png" />
    </Frame>
  </Step>

  <Step title="Test the Webhook">
    Webhookを作成した後、「Test」ドロップダウンから「Push events」を選択して、正しく設定されていることを確認するためのサンプルペイロードを送信します。正しく設定されていれば「Hook executed successfully: HTTP 200」と表示されます。

    これにより、すべてが正しく動作していることと、ドキュメントがGitLabリポジトリと適切に同期されることを確認できます。

    <Frame>
      <img src="/images/gitlab/gitlab-project-webtoken-test.png" />
    </Frame>
  </Step>
</Steps>

<Note>
  サポートが必要な場合は、Mintlifyチームにお問い合わせください。[こちら](https://mintlify.com/enterprise)からご連絡ください。
</Note>

[git-settings]: https://dashboard.mintlify.com/settings/deployment/git-settings
