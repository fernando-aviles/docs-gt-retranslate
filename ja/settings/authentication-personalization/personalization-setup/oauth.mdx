---
title: OAuth 2.0 Handshake
description: PKCEフローを介したユーザーログインを有効にするためにOAuthサーバーと統合する
---

<Info>
  これはOAuth **パーソナライゼーション** Handshakeのドキュメントです。[OAuth **認証** Handshake](/settings/authentication-personalization/authentication-setup/oauth)の設定手順は少し異なります。
</Info>

PKCEフローをサポートする既存のOAuthサーバーをお持ちの場合、Mintlifyとシームレスなログイン体験のために統合することができます。

## 実装

<Steps>
  <Step title="Create your Info API">
    OAuthアクセストークンでアクセス可能なAPIエンドポイントを作成し、以下の形式のJSONペイロードで応答するようにします：[User](../sending-data)形式。このエンドポイントにアクセスするために必要なスコープを記録しておきます。
  </Step>

  <Step title="Configure your Personalization settings">
    ダッシュボードの[dashboard settings](https://dashboard.mintlify.com/products/authentication)に移動し、OAuthオプションを選択して、必要なフィールドに入力します：

    * **Authorization URL**：適切なクエリパラメータを追加する認可リクエストのベースURL。
    * **Client ID**：使用するOAuth 2.0クライアントのID。
    * **Scopes**：リクエストされるスコープの配列。
    * **Token URL**：トークン交換リクエストのベースURL。
    * **Info API URL**：ユーザー情報を取得するために使用するエンドポイント。
  </Step>

  <Step title="Configure your OAuth client">
    ダッシュボードの[dashboard settings](https://dashboard.mintlify.com/products/authentication)に表示されているリダイレクトURLをコピーし、OAuthサーバーの認可済みリダイレクトURLとして追加します。
  </Step>
</Steps>

## 例

PKCEフローをサポートする既存のOAuthサーバーがあります。以下でホストされているドキュメントの認証を設定したいと思います：`foo.com/docs`。

Mintlifyでの認証を設定するために、エンドポイントを作成します：`api.foo.com/docs/user-info`このエンドポイントには`docs-user-info`スコープを持つOAuthアクセストークンが必要で、Mintlifyの仕様に従ってユーザーのカスタムデータを返します。

その後、ダッシュボード設定に移動し、パーソナライゼーション設定からOAuthを選択し、OAuthフローとInfo APIエンドポイントの関連値を入力します：

* **Authorization URL**: `https://auth.foo.com/authorization`
* **Client ID**: `ydybo4SD8PR73vzWWd6S0ObH`
* **Scopes**: `['docs-user-info']`
* **Token URL**: `https://auth.foo.com/exchange`
* **Info API URL**: `https://api.foo.com/docs/user-info`

最後に、ダッシュボード設定に表示されているリダイレクトURLをコピーし、OAuthクライアント設定の認可済みリダイレクトURLとして追加します。
