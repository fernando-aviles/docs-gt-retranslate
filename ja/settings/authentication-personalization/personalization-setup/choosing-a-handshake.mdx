---
title: Handshakeの選択
description: どのHandshake方式があなたのドキュメントに適しているかを決定する方法
---

<Info>
  これは**パーソナライゼーション**ハンドシェイク方式のドキュメントです。認証では[異なるハンドシェイク方式のセット](/settings/authentication-personalization/authentication-setup/choosing-a-handshake)があります。
</Info>

ユーザーがパーソナライズされたコンテンツにアクセスする前に、認証が必要です。Mintlifyは3つのパーソナライゼーションハンドシェイク方式をサポートしています：

1. **共有セッション**：ダッシュボードで使用されているのと同じセッショントークンを使用してユーザーを認証します。
2. **JWT**：URLでJWTを介してユーザー情報をドキュメントに送信する独自のログインフローを使用します。
3. **OAuth 2.0**：PKCEフローを介したユーザーログインを可能にするためにOAuthサーバーと統合します。

## 前提条件

<Tabs>
  <Tab title="Shared Session">
    * あなたのドメインでホストされているダッシュボードまたは他のユーザーポータルがあります。
    * ユーザーのセッション認証情報がクッキーとして保存されています。
    * ダッシュボードと同じオリジンまたはサブドメインに新しいAPIエンドポイントを作成できます。
      * ダッシュボードが`foo.com`の場合、**API URL**は`foo.com`または`*.foo.com`
      * ダッシュボードが`dash.foo.com`の場合、**API URL**は`dash.foo.com`または`*.dash.foo.com`
    * ドキュメントがダッシュボードと同じドメインでホストされています。
      * ダッシュボードが`foo.com`の場合、**docs**は`foo.com`または`*.foo.com`
      * ダッシュボードが`*.foo.com`の場合、**docs**は`foo.com`または`*.foo.com`
  </Tab>

  <Tab title="JWT">
    * 既存のログインフローがあります。
    * このログインフローの最後のステップとして、JWTを作成しドキュメントにリダイレクトするステップを追加できます。
  </Tab>

  <Tab title="OAuth 2.0">
    * PKCEフローをサポートする既存のOAuthサーバーがあります。
    * 返されたOAuthアクセストークンでアクセスできる新しいAPIエンドポイントを作成できます。
  </Tab>
</Tabs>

## 長所と短所

<Tabs>
  <Tab title="Shared Session">
    長所：

    * ダッシュボードにログインしているユーザーは自動的にドキュメントにもログインされます
    * ユーザーのセッションは永続的で、追加のログインを必要とせずにデータを更新できます
    * 最小限のセットアップで済みます

    短所：

    * ドキュメントがバックエンドにリクエストを送信する必要があり、これが望ましくない場合があります
    * セッション認証を使用するダッシュボードが必要です
    * 通常、CORS設定が必要です
  </Tab>

  <Tab title="JWT">
    長所：

    * APIエンドポイントの悪用リスクが低減されます
    * CORS設定が不要です
    * API URLに制限がありません

    短所：

    * 既存のログインフローに組み込む必要があります
    * ダッシュボードのセッションとドキュメントの認証が完全に分離されているため、ユーザーはダッシュボードとドキュメントに別々にログインする必要があります
    * ユーザーデータを更新する度に、ユーザーはドキュメントに再ログインする必要があります
      * ユーザーのデータが頻繁に変更される場合、古いデータがドキュメントに残るリスクを避けるため、ユーザーに頻繁なログインを要求する必要があります
      * ユーザーのデータが頻繁に変更されない場合、これは問題にはなりません
  </Tab>

  <Tab title="OAuth 2.0">
    メリット：

    * 高度なセキュリティ基準
    * API URLに制限なし

    デメリット：

    * 初めてOAuthサーバーを設定する場合、かなりの作業が必要
    * ダッシュボードセッションとドキュメント認証が完全に分離されているため、ユーザーはダッシュボードとドキュメントに別々にログインする必要があります
    * 一部のアプリケーションには過剰な場合があります
  </Tab>
</Tabs>
