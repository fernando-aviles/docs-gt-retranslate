---
title: Shared Session Handshake
description: ダッシュボードとドキュメント間でユーザーセッションをシームレスに共有
---

<Info>
  これは共有セッションの**パーソナライゼーション**ハンドシェイクのドキュメントです。共有セッションハンドシェイクは認証では利用できません。
</Info>

このメソッドは、ユーザーのブラウザに既に保存されているセッション認証情報を利用して、シームレスなドキュメント体験を作成します。

## 実装

<Steps>
  <Step title="Create your Info API">
    セッション認証を使用してユーザーを識別し、[User](../sending-data)フォーマットに従ってJSONペイロードを返すAPIエンドポイントを作成します。

    APIドメインがドキュメントドメインと*完全に一致しない*場合：

    * APIの`Access-Control-Allow-Origin`ヘッダーにドキュメントドメインを追加します（`*`であってはいけません）
    * APIの`Access-Control-Allow-Credentials`ヘッダーが`true`

    <Warning>
      これらのCORSオプションは*単一のエンドポイント*でユーザー情報を返す場合にのみ有効にする必要があります。すべてのダッシュボードエンドポイントでこれらのオプションを有効にすることはお勧めしません。
    </Warning>
  </Step>

  <Step title="Configure your Personalization settings">
    あなたの[ダッシュボード設定](https://dashboard.mintlify.com/products/authentication)に移動し、パーソナライゼーション設定にAPIのURLとログインURLを追加します。
  </Step>
</Steps>

## 例

### サブドメインのダッシュボード、サブドメインのドキュメント

私のダッシュボードは`dash.foo.com`にあり、クッキーベースのセッション認証を使用しています。ダッシュボードのAPIルートは`dash.foo.com/api`でホストされています。`docs.foo.com`でホストされているドキュメントの認証を設定したいと思います。

Mintlifyで認証を設定するために、新しいダッシュボードエンドポイント`dash.foo.com/api/docs/user-info`を作成し、セッション認証を使用してユーザーを識別し、Mintlifyの仕様に従ってカスタムデータを返します。その後、`https://docs.foo.com`を`Access-Control-Allow-Origin`許可リスト**このルートのみに**追加し、`Access-Control-Allow-Credentials`設定が`true` **このルートのみに**設定されていることを確認します。

その後、ダッシュボード設定に移動し、`https://dash.foo.com/api/docs/user-info`をAPI URLフィールドに入力します。

### サブドメインのダッシュボード、ルートのドキュメント

私のダッシュボードは`dash.foo.com`にあり、クッキーベースのセッション認証を使用しています。ダッシュボードのAPIルートは`dash.foo.com/api`でホストされています。`foo.com/docs`でホストされているドキュメントの認証を設定したいと思います。

Mintlifyで認証を設定するために、新しいダッシュボードエンドポイント`dash.foo.com/api/docs/user-info`を作成し、セッション認証を使用してユーザーを識別し、Mintlifyの仕様に従ってカスタムデータを返します。その後、`https://foo.com`を`Access-Control-Allow-Origin`許可リスト**このルートのみに**、そして私の`Access-Control-Allow-Credentials`設定を`true` **このルートのみに設定**。

その後、ダッシュボードの設定に移動して`https://dash.foo.com/api/docs/user-info`をAPI URLフィールドに入力します。

### ルートにダッシュボード、ルートにドキュメント

私のダッシュボードは`foo.com/dashboard`にあり、クッキーベースのセッション認証を使用しています。私のダッシュボードのAPIルートは`foo.com/api`でホストされています。私は`foo.com/docs`でホストされているドキュメントの認証を設定したいと思います。

Mintlifyで認証を設定するために、別のダッシュボードエンドポイント`foo.com/api/docs/user-info`を作成し、セッション認証を使用してユーザーを識別し、Mintlifyの仕様に従ってカスタムデータを返します。

その後、ダッシュボードの設定に移動して`https://foo.com/api/docs/user-info`をAPI URLフィールドに入力します。
