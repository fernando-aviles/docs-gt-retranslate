---
title: 'JWT Handshake'
description: 'Use a customized login flow to authenticate users'
---

<Info>
  This is the documentation for the JWT **Authentication** Handshake. For JWT **Personalization** Handshake setup, see [here](/settings/authentication-personalization/personalization-setup/jwt).
</Info>

Use JWT authentication to implement a custom login flow for your documentation.

## Quick Setup

<Steps>
  <Step title="Get your private key">
    Generate a private key in your [Mintlify dashboard settings](https://dashboard.mintlify.com/products/authentication). Store this securely for your backend.
  </Step>
  <Step title="Implement login">
    Create a login endpoint that:
    - Authenticates the user
    - Creates a JWT with user info in [UserInfo](../sending-data) format
    - Signs it using EdDSA algorithm
    - Redirects to `/login/jwt-callback` with the JWT as hash
  </Step>
  <Step title="Configure settings">
    Add your login URL to the [Authentication settings](https://dashboard.mintlify.com/products/authentication).
  </Step>
</Steps>

## Code Example

<CodeGroup>
```ts TypeScript
import * as jose from 'jose';
import { Request, Response } from 'express';

const signingKey = await jose.importPKCS8(process.env.MINTLIFY_PRIVATE_KEY, 'EdDSA');

export async function handleRequest(req: Request, res: Response) {
  const userInfo = {
    expiresAt: Math.floor((Date.now() + 1000 * 60 * 60 * 24 * 14) / 1000), // 2 week session
    groups: res.locals.user.groups,
    content: {
      firstName: res.locals.user.firstName,
      lastName: res.locals.user.lastName,
    },
  };

  const jwt = await new jose.SignJWT(userInfo)
    .setProtectedHeader({ alg: 'EdDSA' })
    .setExpirationTime('10 s')
    .sign(signingKey);

  return res.redirect(`https://docs.foo.com/login/jwt-callback#${jwt}`);
}
```

```python Python
import jwt # pyjwt
import os
from datetime import datetime, timedelta
from fastapi.responses import RedirectResponse

private_key = os.getenv(MINTLIFY_JWT_PEM_SECRET_NAME, '')

@router.get('/auth')
async def return_mintlify_auth_status(current_user):
  jwt_token = jwt.encode(
    payload={
      'exp': int((datetime.now() + timedelta(seconds=10)).timestamp()),    # 10s JWT expiration
      'expiresAt': int((datetime.now() + timedelta(weeks=2)).timestamp()), # 2 week session
      'groups': ['admin'] if current_user.is_admin else [],
      'content': {
        'firstName': current_user.first_name,
        'lastName': current_user.last_name,
      },
    },
    key=private_key,
    algorithm='EdDSA'
  )

  return RedirectResponse(url=f'https://docs.foo.com/login/jwt-callback#{jwt_token}', status_code=302)
```
</CodeGroup>